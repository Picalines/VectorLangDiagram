@page "/"
@using VectorLang.Compilation

<PageTitle>Index</PageTitle>

<CodeEditor InitialCode=@ExampleProgram OnProgramCompiled="OnProgramCompiled" />

@code {
    private const string ExampleProgram = @"
// Velcome to VectorLang!

def sum(vector a, vector b) -> vector = a + b;

def main() -> void = [
    val a := {1, 2};
    val b := {3, 4};

    plot(a, 'A', #ff0000);
    plot(b, 'B', #0000ff);

    plot(sum(a, b), 'A + B', #ff00ff);
];
";

    private void OnProgramCompiled(CompiledProgram compiledProgram)
    {
        Console.WriteLine("plotted vectors:");

        foreach (var vector in compiledProgram.PlotVectors())
        {
            Console.WriteLine($"'{vector.Label}': {{{vector.Coordinates.X}, {vector.Coordinates.Y}}} {vector.Color}");
        }
    }
}
