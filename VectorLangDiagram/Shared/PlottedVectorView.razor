@using VectorLang.Model

<defs>
    <marker id="arrow-@CSSColor" markerWidth=5 markerHeight=5
            refX=3 refY=3 orient="auto">
        <line x1=3 y1=3 x2=1 y2=2 stroke=@CSSColor stroke-linecap=round />
        <line x1=3 y1=3 x2=1 y2=4 stroke=@CSSColor stroke-linecap=round />
    </marker>
</defs>

<!-- TODO: text and scaling for {0, 0} -->

<line x1=0 y1=0
    x2=@SVGLength(Vector.Coordinates.X) y2=@SVGLength(-Vector.Coordinates.Y)
    stroke=@CSSColor stroke-width=0.7 stroke-linecap=round
    marker-end="url(#arrow-@CSSColor)"/>

@code {
    [Parameter]
    public PlottedVector Vector { get; set; } = new((1, 1), "label", (1, 1, 1));

    private string ViewBox = "0 0 0 0";

    private string CSSColor = "#000000";

    protected override void OnInitialized()
    {
        base.OnInitialized();

        var (r, g, b) = Vector.Color;

        CSSColor = "#"
            + ((int)(r * 255)).ToString("X2")
            + ((int)(g * 255)).ToString("X2")
            + ((int)(b * 255)).ToString("X2");
    }

    private static string SVGLength(double value) => value.ToString(System.Globalization.CultureInfo.InvariantCulture);
}
