@page "/"
@using System.Reflection
@using VectorLangDocs.Shared.DocumentationModel

<h1>Hello, world!</h1>

<DocumentationRepositoryViewer TItem="InstanceTypeDocumentation" Repository="LoadLanguageDocumentation().Types" />

@code {
    private VectorLangDocumentation LoadLanguageDocumentation()
    {
        return VectorLangDocumentation.FromXml(ReadEmbeddedResource("VectorLang/docs/en.xml"));
    }

    private string ReadEmbeddedResource(string resourceName)
    {
        var assembly = Assembly.GetExecutingAssembly()!;

        using Stream stream = assembly.GetManifestResourceStream(resourceName)!;
        using StreamReader reader = new StreamReader(stream);

        return reader.ReadToEnd();
    }
}
